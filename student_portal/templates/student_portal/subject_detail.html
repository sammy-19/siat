{% extends 'student_portal/base.html' %}
{% block title %}{{ subject_instance.subject.title }}{% endblock %}
{% block header_title %} Subject: {{ subject_instance.subject.title }} {% endblock %}

{% block content %}
<div class="container mt-4">
    <p><strong>Code:</strong> {{ subject_instance.subject.code }}</p>
    <p><strong>Instructor:</strong> {{ subject_instance.subject.instructor|default:"TBA" }}</p>
    <p><strong>Description:</strong> {{ subject_instance.subject.description|default:"No description available." }}</p>

    <hr>
    <h4>Assignments ({{ subject_instance.course.title }})</h4>
    <ul>
        {% for a in assignments %}
            <li>
                <strong>{{ a.title }}</strong> â€” 
                Due: {{ a.due_date|date:"M d, Y" }}
                {% if a.file %}
                    <a href="{{ a.file }}" target="_blank" class="btn btn-sm btn-outline-primary ms-2">Download</a>
                {% endif %}
            </li>
        {% empty %}
            <li>No assignments available.</li>
        {% endfor %}
    </ul>

    <hr>
    <h4>Learning Materials ({{ subject_instance.course.title }})</h4>
    <ul>
        {% for m in materials %}
            <li>
                <a href="{{ m.get_display_url }}" target="_blank">{{ m.title }}</a>
                {% if m.type == 'video' %}
                    <span class="badge bg-info text-dark">Video</span>
                {% elif m.type == 'module' %}
                    <span class="badge bg-primary">Module</span>
                {% elif m.type == 'outline' %}
                    <span class="badge bg-secondary">Outline</span>
                {% endif %}
            </li>
        {% empty %}
            <li>No materials uploaded yet.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %}
